<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horror Tarot Duel</title>
    <style>
        /* Simplified CSS */
        body { background: #1a1a1a; color: white; font-family: Arial; }
        .container { max-width: 800px; margin: 0 auto; text-align: center; }
        .card { background: #2a2a2a; padding: 20px; margin: 20px; border-radius: 10px; }
        button { background: #444; color: white; padding: 10px 20px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Horror Tarot Duel</h1>
        <div>Player: <span id="playerScore">0</span> | Computer: <span id="computerScore">0</span></div>
        <div id="status">Press 'Draw Cards' to start!</div>
        <div class="card">
            <div id="playerStats"></div>
            <div id="playerButtons"></div>
        </div>
        <button onclick="startRound()" id="drawButton">Draw Cards</button>
    </div>

<script>
// Debug mode
const DEBUG = true;

// Game state
let playerWins = 0;
let computerWins = 0;
let cards = [];

// Generate cards on startup
generateCards();

function log(message) {
    if(DEBUG) console.log(`[DEBUG] ${message}`);
}

function generateCards() {
    log("Generating cards...");
    cards = [];
    for(let i = 0; i < 100; i++) {
        // Simple stat generation that adds to 15
        let might = Math.floor(Math.random() * 13) + 1;
        let agility = Math.floor(Math.random() * (14 - might)) + 1;
        let wit = 15 - might - agility;
        
        cards.push({
            name: `Card ${i+1}`,
            might: might,
            agility: agility,
            wit: wit
        });
    }
    log(`Generated ${cards.length} cards`);
}

function startRound() {
    log("Starting round...");
    try {
        // Get random cards
        const playerCard = cards[Math.floor(Math.random() * cards.length)];
        const computerCard = cards[Math.floor(Math.random() * cards.length)];
        
        // Generate modifiers
        const playerMods = {
            might: getBonus(),
            agility: getBonus(),
            wit: getBonus()
        };
        
        // Show player card
        document.getElementById('playerStats').innerHTML = `
            Might: ${playerCard.might} (${playerMods.might})<br>
            Agility: ${playerCard.agility} (${playerMods.agility})<br>
            Wit: ${playerCard.wit} (${playerMods.wit})
        `;
        
        // Create buttons
        document.getElementById('playerButtons').innerHTML = `
            <button onclick="resolve('might', ${playerCard.might}, ${playerMods.might})">Choose Might</button>
            <button onclick="resolve('agility', ${playerCard.agility}, ${playerMods.agility})">Choose Agility</button>
            <button onclick="resolve('wit', ${playerCard.wit}, ${playerMods.wit})">Choose Wit</button>
        `;
        
        document.getElementById('status').textContent = "Choose a characteristic!";
        log("Round started successfully");
        
    } catch(error) {
        alert(`Error: ${error.message}`);
        console.error(error);
    }
}

function getBonus() {
    return Math.floor(Math.random() * 11) - 5;
}

function resolve(choice, base, mod) {
    const playerScore = base + mod;
    const computerScore = Math.floor(Math.random() * 20) + 1; // Simple AI
    
    if(playerScore > computerScore) {
        playerWins++;
        document.getElementById('status').innerHTML = `WIN!<br>
            You: ${playerScore} vs Computer: ${computerScore}`;
    } else {
        computerWins++;
        document.getElementById('status').innerHTML = `LOSE!<br>
            You: ${playerScore} vs Computer: ${computerScore}`;
    }
    
    document.getElementById('playerScore').textContent = playerWins;
    document.getElementById('computerScore').textContent = computerWins;
    
    if(playerWins >= 3 || computerWins >= 3) {
        document.getElementById('status').innerHTML += "<br>GAME OVER!";
        document.getElementById('drawButton').disabled = true;
    }
}
</script>
</body>
</html>
